!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("antd")):"function"==typeof define&&define.amd?define(["react","antd"],t):"object"==typeof exports?exports.MybricksComDef=t(require("react"),require("antd")):e.MybricksComDef=t(e.React,e.antd)}(self,((e,t)=>(()=>{"use strict";var n={2598:(e,t,n)=>{n.d(t,{Z:()=>j});var r=n(359),o=n.n(r),i=n(2721),a=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},u=window.setInterval,s=window.clearInterval,c=window.setTimeout,l=window.clearTimeout,f=window,p=new WeakMap,d=new WeakMap,v=new WeakMap,y={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0};function h(){var e={};return Object.getOwnPropertyNames(f).forEach((function(t){var n=Object.getOwnPropertyDescriptor(f,t);if(n&&!n.configurable){var r=Object.prototype.hasOwnProperty.call(n,"get");"top"!==t&&"parent"!==t&&"self"!==t&&"window"!==t||(n.configurable=!0,r||(n.writable=!0)),Object.defineProperty(e,t,Object.freeze(n))}})),e}const w=function(){function e(e){void 0===e&&(e={});var t=this;this.hasDisposed=!1,this.fakeWindow=h(),this.timeoutList=[],this.intervalList=[],this.options={},this.options=e||{},this.proxy=new Proxy(window,{set:function(e,n,r){if(!t.hasDisposed)try{!t.fakeWindow.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(o=n,i=t.fakeWindow,(a=Object.getOwnPropertyDescriptor(window,o))&&a.writable&&Object.defineProperty(i,o,{configurable:a.configurable,enumerable:a.enumerable,writable:a.writable,value:a.value})),t.fakeWindow[n]=r}catch(e){throw console.error("set-key-error",n,e),e}var o,i,a;return!0},get:function(e,n){if(n===Symbol.unscopables)return y;if("window"===n||"self"===n)return t.proxy;if("document"!==n){if("hasOwnProperty"===n)return e.hasOwnProperty;if("eval"===n)return e.eval;if("location"===n)return e.location;try{var r=n in t.fakeWindow?t.fakeWindow[n]:e[n];return"function"!=typeof r||function(e){if(d.has(e))return d.get(e);var t=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return d.set(e,t),t}(r)||function(e){if(p.has(e))return p.get(e);var t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1||/^function\b\s[A-Z].*/.test(e.toString())||/^class\b/.test(e.toString());return p.set(e,t),t}(r)?r:(r=Function.prototype.bind.call(r,e),function(e,t){var n=v.get(t);if(n)return n;var r=Function.prototype.bind.call(t,e);for(var o in t)r[o]=t[o];return t.hasOwnProperty("prototype")&&!r.hasOwnProperty("prototype")&&(r.prototype=t.prototype),v.set(t,r),r}(window,r))}catch(e){throw console.error("get-key-error",n,e),e}}},has:function(e,n){return!t.options.module||"params"!==n&&"cb"!==n}}),this.proxy.setTimeout=function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t.hasDisposed)return 0;var i=c.apply(void 0,a([e,n],r,!1));return t.timeoutList.push(i),i},this.proxy.clearTimeout=function(e){var n=t.timeoutList.indexOf(e);return-1!==n&&t.timeoutList.splice(n,1),l(e)},this.proxy.setInterval=function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t.hasDisposed)return 0;var i=u.apply(void 0,a([e,n],r,!1));return t.intervalList.push(i),i},this.proxy.clearInterval=function(e){var n=t.intervalList.indexOf(e);return-1!==n&&t.intervalList.splice(n,1),s(e)},f.proxy=this.proxy}return e.prototype.compile=function(e){if(this.hasDisposed)throw new Error("sandbox has been destroyed");var t,n=this.options.module;t=n?function(e){return"(\n                function(window, params, cb) {\n                    with(window) {\n                        return (".concat(e,")(...params, cb)\n                    }\n                }\n            )")}(e):function(e){return"(\n                function(window) {\n                    with(window){\n                        ".concat(e,"\n                    } \n                }\n            ).bind(window.proxy)\n        ")}(e);var r=f.eval(t);return{run:function(e,t){try{return n?r(window.proxy,e,t):r(window.proxy)}catch(e){throw console.error("js sandbox error occur:",e),e}}}},e.prototype.dispose=function(){this.timeoutList.forEach((function(e){window.clearTimeout(e)})),this.timeoutList=[],this.intervalList.forEach((function(e){return s(e)})),this.intervalList=[],this.fakeWindow=h(),this.options={},delete f.proxy,this.hasDisposed=!0,console.log("Sandbox was successfully destroyed")},e}();var b,m,g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)};!function(e){e.REQUIRED="required",e.MIN="min",e.MAX="max",e.MIN_LENGTH="minLength",e.MAX_LENGTH="maxLength",e.REG_EXP="regExp",e.CODE_VALIDATOR="codeValidator"}(m||(m={}));var O=[{key:m.REQUIRED,status:!1,visible:!0,title:"必填",message:"内容不能为空"},{key:m.CODE_VALIDATOR,status:!1,visible:!0,title:"代码校验",validateCode:"export default async function (value, context) {\n  if (!value && ![0, false].includes(value)) {\n    context.failed(`内容不能为空`);\n  } else {\n    context.successed();\n  }\n}\n"}],x=((b={})[m.REQUIRED]=function(e){var t=e.value,n=e.message,r=e.failed,o=e.successed;return t||[0,!1].includes(t)?Array.isArray(t)&&t.length<1?r(n):o():r(n)},b[m.CODE_VALIDATOR]=function(e){return function(e,t,n){var r,o=n||{},i=o.env,a=o.callback,u=void 0===a?function(){}:a,s=(null==i?void 0:i.runtime)&&!(null===(r=null==i?void 0:i.runtime)||void 0===r?void 0:r.debug);"object"==typeof e&&(e=s&&(null==e?void 0:e.transformCode)||(null==e?void 0:e.code));var c=null;if(t&&t.length){var l=new w({module:!0}),f=decodeURIComponent(e);c=/export\s+default.*async.*function.*\(/g.test(f)?l.compile("".concat(f.replace(/export\s+default.*function.*\(/g,"async function _RT_("))):l.compile("".concat(f.replace(/export\s+default.*function.*\(/g,"function _RT_(")))}else c=(l=new w).compile("".concat(decodeURIComponent(e)));return c.run(t,u)}(e.validateCode,e.args,{env:e.env})},b);function k(e,t){void 0===e&&(e="u_"),void 0===t&&(t=6);for(var n="abcdefhijkmnprstwxyz0123456789",r=n.length,o="",i=0;i<t;i++)o+=n.charAt(Math.floor(Math.random()*r));return e+o}var P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)};function j(e){var t=e.env,n=e.data,a=e.inputs,u=e.outputs,s=e.logger;(0,r.useLayoutEffect)((function(){a.validate((function(e,r){(function(e){var t=e.value,n=e.env,r=(e.rules||O).filter((function(e){return e.status}));return new Promise((function(e,o){Promise.all(r.map((function(e){return new Promise((function(r,o){var i={successed:function(){return r("success")},failed:function(e){return o(e)}};x[e.key](g({value:t,env:n,args:[t,g(g({},n),i)],validateCode:e.validateCode,message:e.message},i))}))}))).then((function(t){e({validateStatus:"success"})})).catch((function(e){o({validateStatus:"error",help:e})}))}))})({value:n.value,env:t,rules:n.rules}).then((function(e){r.returnValidate(e)})).catch((function(e){r.returnValidate(e)}))})),a.getValue((function(e,t){t.returnValue(n.value)})),a.setValue((function(e){void 0===e||Array.isArray(e)?(n.value=e,c(e)):s.error("多选框的值应为数组格式")})),a.resetValue((function(){n.value=void 0})),a.setDisabled((function(){n.config.disabled=!0})),a.setEnabled((function(){n.config.disabled=!1})),a.setOptions((function(e){var t=[];Array.isArray(e)?e.forEach((function(e,n){t.push(P({checked:!1,disabled:!1,lable:"选项".concat(n),value:"".concat(k())},e))})):t=[P({checked:!1,disabled:!1,lable:"选项",value:"".concat(k())},e||{})];var r=[];t.map((function(e){var t=e.checked,n=e.value;t&&null!=n&&r.push(n)})),n.value=r,n.config.options=t}))}),[]);var c=(0,r.useCallback)((function(e){n.value=e,u.onChange(e)}),[]);return n.visible&&o().createElement("div",null,o().createElement(i.Checkbox.Group,P({},n.config,{options:t.edit?n.staticOptions:n.config.options,value:n.value,onChange:c})))}},2721:e=>{e.exports=t},359:t=>{t.exports=e}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{let e;o.r(i),o.d(i,{default:()=>t}),e={namespace:"mybricks.normal-pc.checkbox",version:"1.0.0",runtime:o(2598).Z};const t=e})(),i})()));