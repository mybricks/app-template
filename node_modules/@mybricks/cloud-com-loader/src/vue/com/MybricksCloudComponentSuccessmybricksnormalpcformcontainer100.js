!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("antd")):"function"==typeof define&&define.amd?define(["react","antd"],t):"object"==typeof exports?exports.MybricksComDef=t(require("react"),require("antd")):e.MybricksComDef=t(e.React,e.antd)}(self,((e,t)=>(()=>{"use strict";var n={8814:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var l=0;l<this.length;l++){var u=this[l][0];null!=u&&(i[u]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&i[s[0]]||(void 0!==o&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=o),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),a&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=a):s[4]="".concat(a)),t.push(s))}},t}},7009:e=>{e.exports=function(e){return e[1]}},4501:(e,t,n)=>{n.d(t,{Z:()=>T});var r=n(359),a=n.n(r),o=n(2721),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},l=function(e){var t=e.com;return e.value,e.onChange,e.field,t.jsx};const u=function(e){var t=e.com,n=e.item,r=e.field;return a().createElement(o.Form.Item,i({},r,{label:null==n?void 0:n.label,name:r?[r.name,null==n?void 0:n.name]:null==n?void 0:n.name,required:null==n?void 0:n.required,validateStatus:null==n?void 0:n.validateStatus,help:null==n?void 0:n.help}),a().createElement(l,{com:t,field:r}))};var c="onMergeFinish";const s=function(e){var t=e.data,n=t.actions;return t.layout,t.formItemColumn,a().createElement(o.Space,{wrap:!0},n.items.map((function(t){return void 0===t.visible||t.visible?a().createElement(o.Button,{"data-form-actions-item":t.key,type:t.type,loading:t.loading,key:t.key,onClick:function(){return function(t){"onClickSubmit"===t.outputId?e.submit(t.outputId):e.outputs[t.outputId]()}(t)}},t.title):null})))};var f=n(3379),d=n.n(f),m=n(7795),p=n.n(m),v=n(569),y=n.n(v),h=n(8575),b=n.n(h),g=n(9216),E=n.n(g),x=n(4589),j=n.n(x),C=n(2465),I={attributes:{title:"less"}};I.styleTagTransform=j(),I.setAttributes=b(),I.insert=y().bind(null,"head"),I.domAPI=p(),I.insertStyleElement=E(),d()(C.Z,I);const S=C.Z&&C.Z.locals?C.Z.locals:void 0,O=function(e){var t=e.children,n=e.actions,r=e.data;return a().createElement("div",{className:S.slotInlineWrapper},t,r.actions.visible&&a().createElement(o.Col,{"data-form-actions":!0,span:r.actions.span,style:{textAlign:r.actions.align}},a().createElement(o.Form.Item,null,n)))},w=function(e){var t=e.children,n=e.actions,r=e.data;return a().createElement(a().Fragment,null,t,r.actions.visible&&a().createElement(o.Col,{"data-form-actions":!0,span:r.actions.span,style:{textAlign:r.actions.align}},a().createElement(o.Form.Item,{label:" ",colon:!1},n)))},F=function(e){var t=e.children,n=e.actions,r=e.data;return a().createElement(a().Fragment,null,t,r.actions.visible&&a().createElement(o.Col,{"data-form-actions":!0,span:r.actions.span,style:{textAlign:r.actions.align}},a().createElement(o.Form.Item,{label:" ",colon:!1},n)))},M=function(e){var t=e.slots,n=e.data,i=e.childrenInputs,l=e.outputs,c=e.submit,f=(0,r.useMemo)((function(){return"inline"===n.layout}),[n.layout]),d=(0,r.useMemo)((function(){return"horizontal"===n.layout}),[n.layout]),m=(0,r.useMemo)((function(){return"vertical"===n.layout}),[n.layout]),p=function(){return a().createElement(s,{data:n,outputs:l,submit:c})};return(0,r.useMemo)((function(){return t.content.render({wrap:function(t){var r=n.items,l=null==t?void 0:t.map((function(t,l){if(t){var c=r.find((function(e){return e.id===t.id}));return i[t.id]=t.inputs,a().createElement(o.Col,{"data-formitem":t.id,key:t.id,flex:"0 0 ".concat(100/n.formItemColumn,"%")},a().createElement(u,{data:n,com:t,item:c,field:null==e?void 0:e.field}))}return a().createElement("div",{key:l},"组件错误")}));return a().createElement(o.Row,{gutter:m?{xs:8,sm:16,md:24}:{}},f&&a().createElement(O,{data:n,actions:a().createElement(p,null)},l),d&&a().createElement(w,{data:n,actions:a().createElement(p,null)},l),m&&a().createElement(F,{data:n,actions:a().createElement(p,null)},l))},inputValues:{}})}),[n.layout])};function k(e){return"span"===e.labelWidthType?{span:e.labelCol}:{flex:"0 0 ".concat(e.labelWidth?e.labelWidth:98,"px")}}var P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},P.apply(this,arguments)};function T(e){var t=e.data,n=e.env,i=e.outputs,l=e.inputs,u=e.slots,s=e._inputs,f=o.Form.useForm()[0],d=(0,r.useMemo)((function(){return{}}),[n.edit]);(0,r.useLayoutEffect)((function(){l.setFieldsValue((function(e){p(),m(e),u.content.inputs.setFieldsValue(e)})),l.resetFields((function(e,t){p(),t.onResetFinish()})),l.submit((function(e,t){h(t)})),l.submitAndMerge((function(e,t){"[object Object]"===Object.prototype.toString.call(e)?b(c,t,e):b(c,t)})),s.validate((function(e,t){v().then((function(e){t.returnValidate({validateStatus:"success"})}))})),s.getValue((function(e,t){y().then((function(e){t.returnValue(e)}))})),s.setValue((function(e){m(e)}))}),[]);var m=function(e){e&&Object.keys(e).forEach((function(n){var r=t.items.find((function(e){return e.name===n}));if(r){var a=d[r.id];"[Object Object]"===Object.prototype.toString.call(e[n])?null==a||a.setValue(P({},e[n])):null==a||a.setValue(e[n])}}))},p=function(){t.items.forEach((function(e){var t=e.id,n=d[t];null==n||n.resetValue()}))},v=(0,r.useCallback)((function(){return new Promise((function(e,n){Promise.all(t.items.map((function(e){var t=e.id,n=d[t];return new Promise((function(t,r){null==n||n.validate(P({},e)).returnValidate((function(n){e.validateStatus=null==n?void 0:n.validateStatus,e.help=null==n?void 0:n.help,t(n)}))}))}))).then((function(t){t.forEach((function(e){"success"!==e.validateStatus&&n(e)})),e(!1)})).catch((function(e){return n(e)}))}))}),[]),y=(0,r.useCallback)((function(){return new Promise((function(e,n){Promise.all(t.items.map((function(e){var n=e.id,r=d[n];return new Promise((function(n,a){var o=0,i={};null==r||r.getValue().returnValue((function(r,a){void 0!==t.fieldsLength?(i[a]={name:e.name,value:r},++o==t.fieldsLength&&n(i)):(i={name:e.name,value:r},n(i))}))}))}))).then((function(n){if("list"===t.dataType){var r=[];n.forEach((function(e){Object.keys(e).map((function(t){r[t]||(r[t]={}),r[t][e[t].name]=e[t].value}))})),e(r)}else{var a={};n.forEach((function(e){a[e.name]=e.value})),e(a)}})).catch((function(e){return n(e)}))}))}),[]),h=function(e){b("onFinish",e)},b=function(e,t,n){v().then((function(){y().then((function(r){var a=P(P({},r),n);t?t[e](a):i[e](a)}))})).catch((function(e){console.log("校验失败",e)}))};return a().createElement(r.Fragment,null,t.isFormItem?a().createElement(M,{slots:u,data:t,childrenInputs:d}):a().createElement(o.Form,{form:f,layout:t.layout,labelCol:"horizontal"===t.layout?k(t):void 0},a().createElement(M,{slots:u,data:t,childrenInputs:d,outputs:i,submit:b})))}},2465:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(7009),a=n.n(r),o=n(8814),i=n.n(o)()(a());i.push([e.id,".slotInlineWrapper-a2a5e {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n}\n",""]),i.locals={slotInlineWrapper:"slotInlineWrapper-a2a5e"};const l=i},3379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},i=[],l=0;l<e.length;l++){var u=e[l],c=r.base?u[0]+r.base:u[0],s=o[c]||0,f="".concat(c," ").concat(s);o[c]=s+1;var d=n(f),m={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==d)t[d].references++,t[d].updater(m);else{var p=a(m,r);r.byIndex=l,t.splice(l,0,{identifier:f,updater:p,references:1})}i.push(f)}return i}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var l=n(o[i]);t[l].references--}for(var u=r(e,a),c=0;c<o.length;c++){var s=n(o[c]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}o=u}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},8575:e=>{e.exports=function(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2721:e=>{e.exports=t},359:t=>{t.exports=e}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={id:e,exports:{}};return n[e](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{let e;a.r(o),a.d(o,{default:()=>t}),e={namespace:"mybricks.normal-pc.form-container",version:"1.0.0",runtime:a(4501).Z};const t=e})(),o})()));