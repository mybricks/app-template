!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("moment")):"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?exports.MybricksComDef=e(require("moment")):t.MybricksComDef=e(t.moment)}(self,(t=>(()=>{"use strict";var e={1361:(t,e,n)=>{n.d(e,{Z:()=>g});var o=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},r=window.setInterval,i=window.clearInterval,a=window.setTimeout,s=window.clearTimeout,c=window,u=new WeakMap,p=new WeakMap,f=new WeakMap,l={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0};function d(){var t={};return Object.getOwnPropertyNames(c).forEach((function(e){var n=Object.getOwnPropertyDescriptor(c,e);if(n&&!n.configurable){var o=Object.prototype.hasOwnProperty.call(n,"get");"top"!==e&&"parent"!==e&&"self"!==e&&"window"!==e||(n.configurable=!0,o||(n.writable=!0)),Object.defineProperty(t,e,Object.freeze(n))}})),t}const y=function(){function t(t){void 0===t&&(t={});var e=this;this.hasDisposed=!1,this.fakeWindow=d(),this.timeoutList=[],this.intervalList=[],this.options={},this.options=t||{},this.proxy=new Proxy(window,{set:function(t,n,o){if(!e.hasDisposed)try{!e.fakeWindow.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(r=n,i=e.fakeWindow,(a=Object.getOwnPropertyDescriptor(window,r))&&a.writable&&Object.defineProperty(i,r,{configurable:a.configurable,enumerable:a.enumerable,writable:a.writable,value:a.value})),e.fakeWindow[n]=o}catch(t){throw console.error("set-key-error",n,t),t}var r,i,a;return!0},get:function(t,n){if(n===Symbol.unscopables)return l;if("window"===n||"self"===n)return e.proxy;if("document"!==n){if("hasOwnProperty"===n)return t.hasOwnProperty;if("eval"===n)return t.eval;if("location"===n)return t.location;try{var o=n in e.fakeWindow?e.fakeWindow[n]:t[n];return"function"!=typeof o||function(t){if(p.has(t))return p.get(t);var e=0===t.name.indexOf("bound ")&&!t.hasOwnProperty("prototype");return p.set(t,e),e}(o)||function(t){if(u.has(t))return u.get(t);var e=t.prototype&&t.prototype.constructor===t&&Object.getOwnPropertyNames(t.prototype).length>1||/^function\b\s[A-Z].*/.test(t.toString())||/^class\b/.test(t.toString());return u.set(t,e),e}(o)?o:(o=Function.prototype.bind.call(o,t),function(t,e){var n=f.get(e);if(n)return n;var o=Function.prototype.bind.call(e,t);for(var r in e)o[r]=e[r];return e.hasOwnProperty("prototype")&&!o.hasOwnProperty("prototype")&&(o.prototype=e.prototype),f.set(e,o),o}(window,o))}catch(t){throw console.error("get-key-error",n,t),t}}},has:function(t,n){return!e.options.module||"params"!==n&&"cb"!==n}}),this.proxy.setTimeout=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e.hasDisposed)return 0;var s=a.apply(void 0,o([t,n],r,!1));return e.timeoutList.push(s),s},this.proxy.clearTimeout=function(t){var n=e.timeoutList.indexOf(t);return-1!==n&&e.timeoutList.splice(n,1),s(t)},this.proxy.setInterval=function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];if(e.hasDisposed)return 0;var s=r.apply(void 0,o([t,n],i,!1));return e.intervalList.push(s),s},this.proxy.clearInterval=function(t){var n=e.intervalList.indexOf(t);return-1!==n&&e.intervalList.splice(n,1),i(t)},c.proxy=this.proxy}return t.prototype.compile=function(t){if(this.hasDisposed)throw new Error("sandbox has been destroyed");var e,n=this.options.module;e=n?function(t){return"(\n                function(window, params, cb) {\n                    with(window) {\n                        return (".concat(t,")(...params, cb)\n                    }\n                }\n            )")}(t):function(t){return"(\n                function(window) {\n                    with(window){\n                        ".concat(t,"\n                    } \n                }\n            ).bind(window.proxy)\n        ")}(t);var o=c.eval(e);return{run:function(t,e){try{return n?o(window.proxy,t,e):o(window.proxy)}catch(t){throw console.error("js sandbox error occur:",t),t}}}},t.prototype.dispose=function(){this.timeoutList.forEach((function(t){window.clearTimeout(t)})),this.timeoutList=[],this.intervalList.forEach((function(t){return i(t)})),this.intervalList=[],this.fakeWindow=d(),this.options={},delete c.proxy,this.hasDisposed=!0,console.log("Sandbox was successfully destroyed")},t}(),m={isEmailPrefix:function(t){return/^[a-zA-Z]+[\d\w_-]*$/.test(t)},isCommaNumber:function(t){return/^\d+(,\d+)*$/.test(t)},numToPercent:function(t,e){return void 0===t?"input error":"".concat((100*t).toFixed(e||2),"%")},isNumber:function(t){return/^\d+$/.test(t)},isUrl:function(t){return/^((https?):\/\/)?((?:[\w-]+\.)+[a-z0-9]+)((?:\/[^/?#]*)+)?(\?[^#]+)?(#.+)?$/i.test(t)},getCookies:function(){return document.cookie.split("; ").reduce((function(t,e){var n=e.indexOf("=");return t[e.slice(0,n)]=e.slice(n+1),t}),{})},getParams:function(){return location.search.slice(1).split("&").reduce((function(t,e){var n=e.split("=");return n[0]&&(t[n[0]]=decodeURIComponent(n[1])),t}),{})},transformCodeByBabel:function(t,e){var n=e||{},o=n.presets,r=n.errorCallback,i=n.babelInstance,a=void 0===i?null===window||void 0===window?void 0:window.Babel:i;if("function"!=typeof(null==a?void 0:a.transform)||"string"!=typeof t)return t;var s={code:t,transformCode:""};try{var c=decodeURIComponent(t);c=/export\s+default.*async.*function.*\(/g.test(c)?c.replace(/export\s+default.*function.*\(/g,"_RTFN_ = async function _RT_("):/export\s+default.*function.*\(/g.test(c)?c.replace(/export\s+default.*function.*\(/g,"_RTFN_ = function _RT_("):"_RTFN_ = ".concat(c," "),s.transformCode=encodeURIComponent(a.transform(c,{presets:o||["env"],comments:!1}).code),s.transformCode="".concat(encodeURIComponent("(function() { var _RTFN_; \n")).concat(s.transformCode).concat(encodeURIComponent("\n; return _RTFN_; })()"))}catch(e){return"function"==typeof r&&r(e),t}return s}};function w(t,e,n){var o,r=n||{},i=r.env,a=r.callback,s=void 0===a?function(){}:a,c=(null==i?void 0:i.runtime)&&!(null===(o=null==i?void 0:i.runtime)||void 0===o?void 0:o.debug);"object"==typeof t&&(t=c&&(null==t?void 0:t.transformCode)||(null==t?void 0:t.code));var u=null;if(e&&e.length){var p=new y({module:!0}),f=decodeURIComponent(t);u=/export\s+default.*async.*function.*\(/g.test(f)?p.compile("".concat(f.replace(/export\s+default.*function.*\(/g,"async function _RT_("))):p.compile("".concat(f.replace(/export\s+default.*function.*\(/g,"function _RT_(")))}else u=(p=new y).compile("".concat(decodeURIComponent(t)));return u.run(e,s)}var v=n(3192),h=n.n(v),b=function(){return b=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},b.apply(this,arguments)};function g(t){var e=t.env,n=t.data,o=t.inputs,r=t.outputs,i=t.logger,a=t.onError,s=(n.transformCode,n.fnBody,n.fns),c=(n.fnParams,n.runImmediate),u={context:{getQuery:e.getQuery,getUserInfo:e.getUserInfo,hasPermission:e.hasPermission,utils:b(b({},m),{moment:h()})},outputs:r};try{c&&e.runtime&&w(s,[u]),o.input0((function(t){try{w(s,[b(b({},u),{inputValue:t})])}catch(t){null==a||a(t),console.error("js计算组件运行错误.",t),i.error("".concat(t))}}))}catch(t){null==a||a(t),console.error("js计算组件运行错误.",t),i.error("".concat(t))}}},3192:e=>{e.exports=t}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{let t;o.r(r),o.d(r,{default:()=>e}),t={namespace:"mybricks.normal-pc.segment",version:"1.0.0",runtime:o(1361).Z};const e=t})(),r})()));